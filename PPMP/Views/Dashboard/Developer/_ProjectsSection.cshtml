@model ProjectDashboardViewModel

@{
    ViewData["Title"] = "Projects";
}

<section id="Projects-section" hidden>
            <!-- Dashboard Header -->
            <div class="mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">Projects</h1>
                <p class="text-gray-500">manage projects.</p>
            </div>


            <div class="bg-white p-6 rounded-xl shadow-sm">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-5">
                    <h2 class="text-xl font-semibold text-gray-800">Projects</h2>
                   
                    <div id="add-project"
                        class="flex items-center gap-2 px-4 py-2 border bg-blue-600 text-white border-gray-300 rounded-lg cursor-pointer hover:border-blue-600 transition-all">
                        <span class="text-white">Add Project</span>
                        <i class="fas fa-plus text-sm text-white"></i>
                    </div>
                </div>


                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Name</th>
                                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Client</th>
                                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">State</th>
                                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Progress Rate</th>
                            </tr>
                        </thead>

                        <tbody class="divide-y divide-gray-100">
                            @{
                                 IEnumerable<ProjectRowViewModel>? ClientRows = Model.projects.Select(   x => new ProjectRowViewModel
                                {
                                    Name = x.Name,
                                    ClientName = x.ClientName,
                                    PrimaryGoal = x.PrimaryGoal,
                                    ProgressRate = x.ProgressRate,
                                    state = x.state
                                });

                                foreach (ProjectRowViewModel client in ClientRows)
                                {
                                    await Html.RenderPartialAsync("Developer/_ProjectRowView", client);
                                }
                                
                            }
                        </tbody>
                    </table>
                </div>

                @await Html.PartialAsync("Developer/_CreateProject", new PPMP.Models.CreateProjectModel())
            </div>
    

    @section Scripts{
      <script src="~/js/Dashboard/developer.js"></script>       
    }
</section>
